<p-toast></p-toast>
<div class="container">
    <div *ngIf="currentQuestion" class="p-card">
        <div class="row">
            <div class="col-md-12">                
                <div class="p-card-header">
                    <p-progressBar [value]="progressValue()" />
                </div>
                <div class="p-card-content">
                    <h3 [ngStyle]="{color: 'var(--highlight-text-color)'}">Pregunta {{ currentIndex + 1 }}/{{ preguntas.length }}</h3>
                    <div class="text-pregunta"><h5>{{ currentQuestion.pregunta }}</h5></div>
                    <textarea rows="5" cols="100" pInputTextarea [(ngModel)]="respuestas[currentIndex].respuesta"></textarea>
                </div>                                
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <button pButton class="btn_chevron" icon="pi pi-chevron-left" (click)="previousQuestion()" [disabled]="currentIndex === 0"></button>&nbsp;&nbsp;
                <button pButton class="btn_chevron" icon="pi pi-chevron-right" (click)="nextQuestion()" [disabled]="currentIndex === preguntas.length - 1"></button>&nbsp;&nbsp;

                <button pButton class="btn_microphone" pTooltip="Responder con audio a texto" tooltipPosition="top" (click)="toggleVoiceRecognition(currentIndex)" *ngIf="isRecording ? 'Detener' : 'Hablar'">
                    <i class="pi pi-microphone" style="font-size: 1.5rem"></i>
                </button>&nbsp;&nbsp;
                <p class="text-danger" *ngIf="isRecording">
                    Grabación iniciada
                </p>
                <p class="text-success" *ngIf="errorMessage">
                    {{ errorMessage }}
                </p>
            </div>
            <div class="col-md-4">
                <button pButton pRipple label="Enviar" class="btn-success" (click)="submitAnswers()" [disabled]="!btn_success"></button>
            </div>
        </div>
    </div>    
</div>


<div class="container-fluid">
    <div class="row">
      <div class="col call-chat-sidebar">
        <div class="card">
          <div class="card-body chat-body">
            <div class="chat-box">
              <!--app-users-chats></app-users-chats-->
            </div>
          </div>
        </div>
      </div>
      <div class="col call-chat-body">
        <div class="card">
          <div class="card-body p-0">
            <div class="row chat-box">
              <div class="col chat-right-aside">
                <div class="chat">
                  <div class="media chat-header clearfix"><img class="rounded-circle" src="assets/images/user/8.jpg" alt="">
                    <div class="media-body">
                      <div class="about">
                        <div class="name">Kori Thomas  <span class="font-primary f-12">Typing...</span></div>
                        <div class="status digits">Last Seen 3:55 PM</div>
                      </div>
                    </div>
                    <ul class="list-inline float-start chat-menu-icons">
                      <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-search"></i></a></li>
                      <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-clip"></i></a></li>
                      <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-headphone-alt"></i></a></li>
                      <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-video-camera"></i></a></li>
                      <li class="list-inline-item toogle-bar" (click)="openMenu()"><a href="javascript:void(0)"><i class="icon-menu"></i></a></li>
                    </ul>
                  </div>
                  <!-- chat-header end-->
                  <!-- chat-history start-->
                  <div class="chat-history">
                    <div class="row">
                      <div class="col text-center pe-0 call-content">
                        <div>
                          <div class="total-time">
                            <h2 class="digits">36 : 56</h2>
                          </div>
                          <div class="call-icons">
                            <ul class="list-inline">
                              <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-video-camera"></i></a></li>
                              <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-volume"></i></a></li>
                              <li class="list-inline-item"><a href="javascript:void(0)"><i class="icon-user"></i></a></li>
                            </ul>
                          </div>
                          <button class="btn btn-danger btn-block btn-lg">END CALL</button>
                          <div class="receiver-img"><img src="assets/images/other-images/receiver-img.jpg" alt=""></div>
                        </div>
                      </div>
                      <div class="col-sm-6 caller-img-sec">
                       <div class="caller-img" style="background-image: url('assets/images/other-images/caller.jpg'); background-size: cover; background-position: center center; display: block;">
                         <img class="img-fluid bg-img-cover" src="assets/images/other-images/caller.jpg" alt="" style="display: none;">
                       </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col chat-menu" [class.show]="show">
                <app-chat-menu></app-chat-menu>
               </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



<p-dialog header="Header" [(visible)]="visible" [modal]="true" [breakpoints]="{ '960px': '75vw' }" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
    <ng-template pTemplate="header">
        <div class="inline-flex align-items-center justify-content-center">
            <span class="font-bold white-space-nowrap">Error</span>
        </div>
    </ng-template>
    <p class="m-0">
        Debes responder todas las preguntas antes de enviar la entrevista
    </p>
</p-dialog>